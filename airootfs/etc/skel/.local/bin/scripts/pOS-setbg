#!/bin/sh

#	Run by itself, set the wallpaper (at X start).
#	If given a file, set that as the new wallpaper.

# Location of link to wallpaper link.
bgloc="${XDG_DATA_HOME:-$HOME/.local/share/}/bg"

if [ -f "$1" ]; then
    dunstify -a center -u normal -i "$1" "Changing wallpaper..."
    if [ $(readlink -f "$1") != $(readlink -f "$bgloc") ] && ! pacman -Qq "lightdm" > /dev/null; then
        notify-send -a center "Updating lock screen..."
        betterlockscreen -u "$1"
    fi
    ln -sf "$(readlink -f "$1")" "$bgloc"
fi

if [ ! -e "$bgloc" ] && [ -f "/usr/share/wallpapers/wp.png" ]; then
	bgloc="/usr/share/wallpapers/wp.png"
fi

xwallpaper --zoom "$bgloc"
